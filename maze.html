<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–õ–∞–±–∏—Ä–∏–Ω—Ç</title>
<style>
body {
  background: #000;
  color: #fff;
  font-family: Arial;
  text-align: center;
}

.grid {
  display: grid;
  grid-template-columns: repeat(5, 50px);
  gap: 2px;
  justify-content: center;
  margin: 20px auto;
}

.cell {
  width: 50px;
  height: 50px;
  background: #111;
}

.wall { background: #000; border: 1px solid #444; }
.player { background: #fff; }
.exit { background: #777; }

#win {
  display: none;
  font-size: 22px;
  margin-top: 15px;
  border: 2px solid #fff;
  padding: 10px;
}

button {
  background: #000;
  color: #fff;
  border: 2px solid #fff;
  padding: 10px 20px;
  cursor: pointer;
}

button:hover {
  background: #fff;
  color: #000;
}
</style>
</head>
<body>

<h2>–õ–∞–±–∏—Ä–∏–Ω—Ç</h2>
<p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: —Å—Ç—Ä–µ–ª–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã</p>

<div class="grid" id="grid"></div>

<div id="win"></div>

<button onclick="reset()">–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫</button>

<script>
const map = [
  "#####",
  "#P  #",
  "# # #",
  "#  E#",
  "#####"
];

let player = {x:1, y:1};
let startTime = Date.now();
let finished = false;

const grid = document.getElementById("grid");
const win = document.getElementById("win");

function draw() {
  grid.innerHTML = "";
  map.forEach((row,y)=>{
    [...row].forEach((cell,x)=>{
      let d = document.createElement("div");
      d.className = "cell";
      if (cell === "#") d.classList.add("wall");
      if (x===player.x && y===player.y) d.classList.add("player");
      if (cell === "E") d.classList.add("exit");
      grid.appendChild(d);
    });
  });
}

document.addEventListener("keydown", e => {
  if (finished) return;

  let dx=0, dy=0;
  if (e.key==="ArrowUp") dy=-1;
  if (e.key==="ArrowDown") dy=1;
  if (e.key==="ArrowLeft") dx=-1;
  if (e.key==="ArrowRight") dx=1;

  let nx = player.x + dx;
  let ny = player.y + dy;

  if (map[ny][nx] !== "#") {
    player.x = nx;
    player.y = ny;

    if (map[ny][nx] === "E") {
      finished = true;
      let time = Math.round((Date.now() - startTime) / 1000);
      win.style.display = "block";
      win.textContent = `üéâ –ü–æ–±–µ–¥–∞! –í—ã –ø—Ä–æ—à–ª–∏ –ª–∞–±–∏—Ä–∏–Ω—Ç –∑–∞ ${time} —Å–µ–∫—É–Ω–¥`;
    }
    draw();
  }
});

function reset() {
  location.reload();
}

draw();
</script>

</body>
</html>
